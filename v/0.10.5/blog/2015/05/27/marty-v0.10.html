<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>marty.js v0.10</title>
  <meta name="viewport" content="width=device-width">

  <link rel="shortcut icon" href="/v/0.10.5/favicon.ico?v=1" type="image/x-icon">

  <link rel="stylesheet" type="text/css" href="/v/0.10.5/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/v/0.10.5/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/v/0.10.5/css/codemirror.css">
  <link rel="stylesheet" type="text/css" href="/v/0.10.5/css/syntax.css">
  <link rel="stylesheet" type="text/css" href="/v/0.10.5/css/docs.css">

  <script type="text/javascript" src="/v/0.10.5/js/codemirror.js"></script>
</head>
<body>

  
  <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
    <div class="container">
      <div class="navbar-header">
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/v/0.10.5/" class="navbar-brand">marty.js</a>
      </div>
      <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
        <ul class="nav navbar-nav">
          <li>
            <a href="/v/0.10.5/guides/getting-started">Guides</a>
            <ul class="nav sub-nav visible-xs-block">
              
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/getting-started/index.html">
                    Getting Started
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/flux/index.html">
                    Flux
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/marty-native/index.html">
                    Marty Native
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/application/index.html">
                    Application
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/stores/index.html">
                    Stores
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/fetching-state/index.html">
                    Fetching state
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/action-creators/index.html">
                    Action Creators
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/queries/index.html">
                    Queries
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/containers/index.html">
                    Containers
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/state-mixin/index.html">
                    State Mixin
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/state-sources/index.html">
                    State Sources
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/isomorphism/index.html">
                    Isomorphism
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/developer-tools/index.html">
                    Developer Tools
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/constants/index.html">
                    Constants
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/dispatcher/index.html">
                    Dispatcher
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/upgrading/index.html">
                    Upgrading
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/guides/further-reading/index.html">
                    Further reading
                  </a>
                </li>
              
            </ul>
          </li>
          <li>
            <a href="/v/0.10.5/api/top-level-api">API</a>
            <ul class="nav sub-nav visible-xs-block">
              
              
                <li >
                  

                  <a  href="/v/0.10.5/api/top-level-api/index.html">
                    Top-Level API
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/application/index.html">
                    Application
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/stores/index.html">
                    Stores
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/action-creators/index.html">
                    Action Creators
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/queries/index.html">
                    Queries
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/containers/index.html">
                    Containers
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/inject-app/index.html">
                    Inject App
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/state-mixin/index.html">
                    State Mixin
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/app-mixin/index.html">
                    App Mixin
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/state-sources/index.html">
                    State Sources
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/constants/index.html">
                    Constants
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.10.5/api/test-utils/index.html">
                    Test Utils
                  </a>
                </li>
              
            </ul>
          </li>
          <li>
            <a href="/v/0.10.5/support">Support</a>
          </li>
          <li>
            <a href="/v/0.10.5/devtools">Developer Tools</a>
          </li>
          <li class="active">
            

            <a href="/v/0.10.5/blog/2015/08/02/marty-last.html">Blog</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="http://github.com/martyjs/marty">
              <i class="fa fa-github"></i>
              Github
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  

<div class="container bs-docs-container">
  <div class="bs-docs-sidebar hidden-print col-md-2 hidden-xs col-xs-2">
    <ul class="sections-nav nav" role="navigation">
      
        <li class="nav-section">
          <a  href="/v/0.10.5/blog/2015/08/02/marty-last.html">Marty v0.10 will be the last major release</a>
        </li>
      
        <li class="nav-section">
          <a  class="active" href="/v/0.10.5/blog/2015/05/27/marty-v0.10.html">marty.js v0.10</a>
        </li>
      
        <li class="nav-section">
          <a  href="/v/0.10.5/blog/2015/03/24/marty-v0.9.html">marty.js v0.9</a>
        </li>
      
    </ul>
  </div>
  <div class="bs-docs-content col-md-10 col-s-10 col-xs-10" role="main">
    <h1 class="page-title">
      marty.js v0.10


      <span class="meta">by <a href="http://github.com/jhollingworth">James Hollingworth</a> <span class="hidden-xs">on May 27, 2015</span></span>
    </h1>
    <div class="content">
      <p>Today I&#39;m pleased to announce Marty v0.10! So whats new?</p>

<h2 id="marty-native">marty-native</h2>

<p>To complement React Natives arrival we now have <a href="/v/0.10.5/guides/marty-native/index.html">marty-native</a>. Internally marty and marty-native are actually the same code, the only difference being we need to require in <code>react-native</code> instead of <code>react</code>. This opens up some interesting code-sharing abilities we will discuss soon. You can check out our <a href="https://github.com/martyjs/MartyNativeChatExample">native chat example</a> to see how to use Marty with React Native.</p>

<p>We&#39;ve also updated Marty Developer Tools to allow you to debug native applications (as well as any app outside of Chrome, e.g. <a href="https://github.com/atom/electron">electron</a>). <a href="/v/0.10.5/guides/developer-tools/index.html#marty-native">See our guide for more details</a>.</p>

<p><img src="http://i.imgur.com/qkaEgHV.gif" width="100%"/></p>

<h2 id="singleton">No more singletons</h2>

<p>In previous versions of Marty everything was a singleton. This made it very simple to write your app, you just require in whatever you want and start using it. Unfortunately in exchange for simplicity we made some very important things like isomorphism and testing much harder. We introduced some changes in v0.9 (e.g. <code>for</code>) which helped improve the situation but never truly resolved it and so in v0.10 we decided to solve it once and for all.</p>

<p>In v0.10 there are no more singletons. Functions like <code>Marty.createStore</code> will now return a type rather than an instance, <code>Marty.register</code> is no longer needed and there is no global dispatcher. Instead we introduce a new <a href="/v/0.10.5/guides/application/index.html"><code>Application</code></a> type which is responsible for knowing about everything about your application.</p>

<div class="sample">    <div class="btn-group zero-clipboard" role="group"> <button type="button" data-style="classic" class="btn btn-default classic">classic</button> <button type="button" data-style="es6" class="btn btn-default es6">es6</button> </div><div class="highlight" data-style="classic"><pre><code data-lang="js" class="language-js"><span class="kd">var</span> <span class="nx">Marty</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'marty'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">ApplicationContainer</span> <span class="o">=</span> <span class="nx">Marty</span><span class="p">.</span><span class="nx">ApplicationContainer</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">ExampleApp</span> <span class="o">=</span> <span class="nx">Marty</span><span class="p">.</span><span class="nx">createApplication</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">register</span><span class="p">({</span>
        <span class="na">user</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">store</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./stores/userStore'</span><span class="p">),</span>
            <span class="na">queries</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./queries/userQueries'</span><span class="p">),</span>
            <span class="na">actionCreators</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./actions/userActionCreators'</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ExampleApp</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">getUser</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">dispatcher</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">console</span><span class="p">));</span>

<span class="nx">React</span><span class="p">.</span><span class="nx">render</span><span class="p">((</span>
    <span class="o">&lt;</span><span class="nx">ApplicationContainer</span> <span class="nx">app</span><span class="o">=</span><span class="p">{</span><span class="nx">app</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">User</span> <span class="nx">id</span><span class="o">=</span><span class="p">{</span><span class="mi">123</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/ApplicationContainer</span><span class="err">&gt;
</span><span class="p">),</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span></code></pre></div><div class="highlight" data-style="es6"><pre><code data-lang="js" class="language-js"><span class="kd">var</span> <span class="p">{</span>
    <span class="nx">Application</span><span class="p">,</span>
    <span class="nx">ApplicationContainer</span>
<span class="p">}</span>  <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'marty'</span><span class="p">);</span>

<span class="c1">// application.js</span>
<span class="kr">class</span> <span class="nx">ExampleApp</span> <span class="kr">extends</span> <span class="nx">Application</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">register</span><span class="p">({</span>
            <span class="na">user</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">store</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./stores/userStore'</span><span class="p">),</span>
                <span class="na">queries</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./queries/userQueries'</span><span class="p">),</span>
                <span class="na">actionCreators</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./actions/userActionCreators'</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ExampleApp</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">getUser</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">dispatcher</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">console</span><span class="p">));</span>

<span class="nx">React</span><span class="p">.</span><span class="nx">render</span><span class="p">((</span>
    <span class="o">&lt;</span><span class="nx">ApplicationContainer</span> <span class="nx">app</span><span class="o">=</span><span class="p">{</span><span class="nx">app</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">User</span> <span class="nx">id</span><span class="o">=</span><span class="p">{</span><span class="mi">123</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/ApplicationContainer</span><span class="err">&gt;
</span><span class="p">),</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span></code></pre></div>
</div>

<p><code>Application</code>s give you more fine grained control over how you build your application, allowing you to do things like run multiple independent applications on a single page.</p>

<p>Testing your application becomes much simpler now that you can test components in isolation. We have a new set of <a href="/v/0.10.5/api/test-utils/index.html">test utils</a> that make testing Marty applications much easier. To accompany these utils we have a some <a href="https://github.com/martyjs/marty-test-examples">examples about how to test the various bits of a Marty application</a>.</p>

<p>This will be a fairly large change for those upgrading from v0.9. Our <a href="/v/0.10.5/guides/upgrading/09_10.html">upgrade guide</a> should cover everything you need to know. We&#39;ve also updated our <a href="https://github.com/martyjs/marty-chat-example-es6/">chat example</a>. If you need any further help you can chat to us on <a href="https://gitter.im/martyjs/marty">gitter.im/martyjs/marty</a></p>

<h2 id="es7">ES7 features</h2>

<p>While ES7 is still a while away, thanks to <a href="https://babeljs.io/docs/usage/experimental/">babel</a> we can start playing with it now. We&#39;ve added experimental support for <a href="https://gist.github.com/jeffmo/054df782c05639da2adb">class properties</a> and <a href="https://github.com/wycats/javascript-decorators">decorators</a>. To enable make sure stage 0 is enabled in your <a href="https://babeljs.io/docs/usage/options/">babel options</a>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="p">{</span> <span class="nx">handles</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'marty'</span><span class="p">);</span>

<span class="kr">class</span> <span class="nx">UserStore</span> <span class="kr">extends</span> <span class="nx">Marty</span><span class="p">.</span><span class="nx">Store</span> <span class="p">{</span>
    <span class="c1">// Equivalent to getInitialState()</span>
    <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="p">};</span>

    <span class="err">@</span><span class="nx">handles</span><span class="p">(</span><span class="nx">UserConstants</span><span class="p">.</span><span class="nx">RECEIVE_USER</span><span class="p">)</span>
    <span class="nx">addUser</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h2 id="diet">Marty's gone on a diet</h2>

<p>We&#39;ve shave 2.5KB off Marty&#39;s gzipped file size (25KB vs 27.5KB). This was mostly down to us removing a lot of old, unused features which we&#39;re making Marty bloated and complicated to understand.</p>

<h2 id="changelog">Changelog</h2>

<p>For those currently using Marty v0.9, we&#39;ve written a <a href="/v/0.10.5/guides/upgrading/09_10.html">guide for upgrading to v0.10</a>.</p>

<h3> New features</h3>

<ul>
<li><a href="https://github.com/martyjs/marty/issues/230">marty-native</a></li>
<li><a href="https://github.com/martyjs/marty/issues/261">No singleton</a></li>
<li><a href="https://github.com/martyjs/marty-lib/pull/3">ES7 features</a></li>
<li><a href="https://github.com/martyjs/marty/issues/19">Improved testing</a></li>
<li>DevTools supports marty-native</li>
</ul>

<h3>Deprecations</h3>

<ul>
<li>Due to API incompatibility issues  <code>parseJSON</code> will be removed by default in future versions. Instead you should call <code>this.json()</code> from within your state source.</li>
</ul>

<h3>Removed</h3>

<ul>
<li><code>Marty.register()</code> is no longer needed, just return the type</li>
<li>You will no longer be able to pass in a store or an object hash of stores into <code>Marty.createStateMixin</code></li>
<li><a href="http://martyjs.org/v/0.9.0/api/stores/index.html#rollback">Rollbacks</a> have been removed entirely</li>
<li><a href="http://martyjs.org/api/stores/#handlers">Store handler values</a> can only be either a string or an array of strings. You cannot do complex object queries any more.</li>
<li><code>Marty.registry</code> is no longer supported. Use applications instead.</li>
<li><code>Marty.createContext()</code> is no longer supported. Use applications instead.</li>
<li><code>Marty.renderToString()</code> is no longer supported. Use <code>Application#renderToString()</code> instead</li>
<li><code>Store#rollback()</code> is no longer supported. You should instead dispatch an error action.</li>
<li><code>.for(this)</code> has been removed. Use applications instead.</li>
<li>You no longer to specify <code>id</code>&#39;s in the type. Instead define the Id on the <code>Application#register()</code></li>
<li><code>require(&#39;marty&#39;).Dispatcher</code> is no longer supported. Create an application and access the <a href="http://martyjs.org/api/application/index.html#dispatcher">dispatcher</a>.</li>
<li><code>require(&#39;marty/http/hooks&#39;)</code> is no longer supported. Use <code>require(&#39;marty&#39;).hooks</code> instead</li>
<li><code>require(&#39;marty/environment&#39;)</code> is no longer supported. Use <code>require(&#39;marty&#39;).environment</code></li>
<li><code>require(&#39;marty/fetch&#39;)</code> is no longer supported. Use <code>require(&#39;marty&#39;).fetch</code></li>
<li><code>require(&#39;marty/when&#39;)</code> is no longer supported. Use <code>require(&#39;marty&#39;).when</code></li>
<li><code>require(&#39;marty/autoDispatch&#39;)</code> is no longer supported. Use <code>require(&#39;marty&#39;).autoDispatch</code></li>
<li><code>require(&#39;marty&#39;).Diagnostics</code> is no longer supported. Use <code>require(&#39;marty&#39;).diagnostics</code></li>
</ul>

    </div>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        var disqus_shortname = 'martyjs';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</div>

<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = 'martyjs';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

  <footer class="bs-docs-footer" role="contentinfo">
    <div class="container">
      <p>Code licensed under <a href="https://github.com/martyjs/marty/blob/master/LICENSE" target="_blank">MIT</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
      <ul class="bs-docs-footer-links muted">
        <li>v0.10.5</li>
        <li>·</li>
        <li><a href="https://github.com/martyjs/marty">GitHub</a></li>
        <li>·</li>
        <li><a href="https://github.com/martyjs/marty/issues">Issues</a></li>
        <li>·</li>
        <li><a href="https://github.com/martyjs/marty/releases">Releases</a></li>
      </ul>
    </div>
  </footer>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56575082-1', 'auto');
    ga('send', 'pageview');

  </script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript" src="/v/0.10.5/js/style.js"></script>
  <script type="text/javascript" src="/v/0.10.5/js/headings.js"></script>
  <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
</body>
</html>