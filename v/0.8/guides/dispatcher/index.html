<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Dispatcher | marty.js</title>
  <meta name="viewport" content="width=device-width">

  <link rel="shortcut icon" href="/favicon.ico?v=1" type="image/x-icon">

  <link rel="stylesheet" type="text/css" href="/v/0.8.15/css/bootstrap.min.css ">
  <link rel="stylesheet" type="text/css" href="/v/0.8.15/css/font-awesome.min.css ">
  <link rel="stylesheet" type="text/css" href="/v/0.8.15/css/codemirror.css ">
  <link rel="stylesheet" type="text/css" href="/v/0.8.15/css/docs.css ">

  <script type="text/javascript" src="/v/0.8.15/js/codemirror.js "></script>
</head>
<body>

  
  <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
    <div class="container">
      <div class="navbar-header">
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/v/0.8.15/ " class="navbar-brand">marty.js</a>
      </div>
      <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
        <ul class="nav navbar-nav">
          <li class="active">
            <a href="/v/0.8.15/guides/getting-started ">Guides</a>
            <ul class="nav sub-nav visible-xs-block">
              
              
                <li >
                  

                  <a  href="/v/0.8.15/guides/getting-started/index.html">
                    Getting Started
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/guides/flux/index.html">
                    Flux
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/guides/stores/index.html">
                    Stores
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/guides/action-creators/index.html">
                    Action Creators
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/guides/state-mixin/index.html">
                    State Mixin
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/guides/state-sources/index.html">
                    State Sources
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/guides/constants/index.html">
                    Constants
                  </a>
                </li>
              
                <li  class="active">
                  

                  <a  class="active" href="/v/0.8.15/guides/dispatcher/index.html">
                    Dispatcher
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/guides/further-reading/index.html">
                    Further reading
                  </a>
                </li>
              
            </ul>
          </li>
          <li>
            <a href="/v/0.8.15/api/stores ">API</a>
            <ul class="nav sub-nav visible-xs-block">
              
              
                <li >
                  

                  <a  href="/v/0.8.15/api/stores/index.html">
                    Stores
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/api/action-creators/index.html">
                    Action Creators
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/api/state-mixin/index.html">
                    State Mixin
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/api/state-sources/index.html">
                    State Sources
                  </a>
                </li>
              
                <li >
                  

                  <a  href="/v/0.8.15/api/constants/index.html">
                    Constants
                  </a>
                </li>
              
            </ul>
          </li>
          <li>
            <a href="/v/0.8.15/devtools ">Developer Tools</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="http://github.com/jhollingworth/marty">
              <i class="fa fa-github"></i>
              Github
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  

<div class="container bs-docs-container">
  <div class="bs-docs-sidebar hidden-print col-md-2 hidden-xs col-xs-2">
    <ul class="sections-nav nav" role="navigation">
      
      
      

      
        

        
          
        
          
        
          
        
          
        
          
        
          
            
          
        
          
        
          
        
          
        

        <li  class="nav-section" >
          

          <a  href="/v/0.8.15/guides/getting-started/index.html">
              Getting Started
          </a>
          
        </li>
      
        

        
          
        
          
        
          
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        

        <li  class="nav-section" >
          

          <a  href="/v/0.8.15/guides/flux/index.html">
              Flux
          </a>
          
        </li>
      
        

        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
          
        

        <li  class="nav-section" >
          

          <a  href="/v/0.8.15/guides/stores/index.html">
              Stores
          </a>
          
            <ul class="nav">
            
              
                <li>
                  <a 
                      href="/v/0.8.15/guides/stores/fetching-data.html">Fetching data</a>
                </li>
              
            
              
                <li>
                  <a 
                      href="/v/0.8.15/guides/stores/immutable-data-collections.html">Immutable data collections</a>
                </li>
              
            
              
              
            
            </ul>
          
        </li>
      
        

        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

        <li  class="nav-section" >
          

          <a  href="/v/0.8.15/guides/action-creators/index.html">
              Action Creators
          </a>
          
            <ul class="nav">
            
              
                <li>
                  <a 
                      href="/v/0.8.15/guides/action-creators/actions-vs-action-creators.html">Actions vs. Action Creators</a>
                </li>
              
            
              
              
            
              
                <li>
                  <a 
                      href="/v/0.8.15/guides/action-creators/source-action-creators.html">Source Action Creators</a>
                </li>
              
            
            </ul>
          
        </li>
      
        

        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
          
        
          
        
          
        

        <li  class="nav-section" >
          

          <a  href="/v/0.8.15/guides/state-mixin/index.html">
              State Mixin
          </a>
          
        </li>
      
        

        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
          
        
          
        

        <li  class="nav-section" >
          

          <a  href="/v/0.8.15/guides/state-sources/index.html">
              State Sources
          </a>
          
            <ul class="nav">
            
              
                <li>
                  <a 
                      href="/v/0.8.15/guides/state-sources/http.html">HTTP State Source</a>
                </li>
              
            
              
              
            
              
                <li>
                  <a 
                      href="/v/0.8.15/guides/state-sources/json-storage.html">JSON Storage State Source</a>
                </li>
              
            
              
                <li>
                  <a 
                      href="/v/0.8.15/guides/state-sources/local-storage.html">Local Storage State Source</a>
                </li>
              
            
              
                <li>
                  <a 
                      href="/v/0.8.15/guides/state-sources/session-storage.html">Session Storage State Source</a>
                </li>
              
            
            </ul>
          
        </li>
      
        

        
          
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

        <li  class="nav-section" >
          

          <a  href="/v/0.8.15/guides/constants/index.html">
              Constants
          </a>
          
        </li>
      
        

        
          
        
          
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        

        <li  class="nav-section active">
          

          <a  class="active" href="/v/0.8.15/guides/dispatcher/index.html">
              Dispatcher
          </a>
          
        </li>
      
        

        
          
        
          
        
          
        
          
        
          
            
          
        
          
        
          
        
          
        
          
        

        <li  class="nav-section" >
          

          <a  href="/v/0.8.15/guides/further-reading/index.html">
              Further reading
          </a>
          
        </li>
      
    </ul>
  </div>
  <div class="bs-docs-content col-md-10 col-s-10 col-xs-10" role="main">
    
      <h1 class="page-title">Dispatcher</h1>
    
    <div class="content">
      <p>The dispatcher is the central hub in which all application data flows throw. When a store is created it <a href="http://facebook.github.io/flux/docs/dispatcher.html#api">registers</a> a callback with the dispatcher. Whenever an <a href="/v/0.8.15/guides/action-creators/index.html">action creator</a> creates an action and you call <code>this.dispatch()</code>, the action will be passed to the dispatcher, which passes it to any registered stores. The dispatcher will call each registered callback synchronously. Any actions that are dispatched during this process will be queued until all callbacks are called.</p>

<p>Marty uses <a href="https://github.com/facebook/flux/">facebook&#39;s dispatcher</a>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Dispatcher</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'marty/dispatcher'</span><span class="p">).</span><span class="nx">getCurrent</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">dispatchToken</span> <span class="o">=</span> <span class="nx">Dispatcher</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">action</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">Dispatcher</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'CREATE_FOO'</span> <span class="p">});</span></code></pre></div>

<p>Normally <a href="/v/0.8.15/guides/action-creators/index.html">action creators</a> are responsible for calling the dispatcher. However if you feel the need to dispatch an action elsewhere, Marty expects the dispatch payload to be an instance of <a href="https://github.com/jhollingworth/marty/blob/master/lib/actionPayload.js"><code>ActionPayload</code></a>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">Dispatcher</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'marty/dispatcher'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">ActionPayload</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'marty/actionPayload'</span><span class="p">);</span>

<span class="nx">Dispatcher</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="k">new</span> <span class="nx">ActionPayload</span><span class="p">({</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'CREATE_FOO'</span>
<span class="p">}));</span></code></pre></div>

    </div>
  </div>
</div>

  <footer class="bs-docs-footer" role="contentinfo">
    <div class="container">
      <p>Code licensed under <a href="https://github.com/jhollingworth/marty/blob/master/LICENSE" target="_blank">MIT</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
      <ul class="bs-docs-footer-links muted">
        <li>v0.8.15</li>
        <li>·</li>
        <li><a href="https://github.com/jhollingworth/marty">GitHub</a></li>
        <li>·</li>
        <li><a href="https://github.com/jhollingworth/marty/issues">Issues</a></li>
        <li>·</li>
        <li><a href="https://github.com/jhollingworth/marty/releases">Releases</a></li>
      </ul>
    </div>
  </footer>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56575082-1', 'auto');
    ga('send', 'pageview');

  </script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript" src="/v/0.8.15/js/headings.js "></script>
  <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
</body>
</html>